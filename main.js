!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s,this.isLiked=e.isLiked,this._ownerId=e.owner._id,this._cardId=e._id,this._handleLikeClick=r,this._handleDeleteClick=n}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this._cardId)})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}updateLikes(e){this.isLiked=e,this._toggleLikeButton()}_toggleLikeButton(){this.isLiked?this._likeButton.classList.add("card__button-like_active"):this._likeButton.classList.remove("card__button-like_active")}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}removeCardElement(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__button-like"),this._deleteButton=this._cardElement.querySelector(".card__button-delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._toggleLikeButton(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e,t){let{items:s,renderer:r}=e;this._renderItems=s,this._renderer=r,this._container=t}renderItems(){console.log("this._renderItems:",this._renderItems),this._renderItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_closeModalClick=e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal"))&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",this._closeModalClick)}}class n extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__form-input").forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._popupForm.reset(),super.close()}}const i=document.querySelector(".profile__title"),o=document.querySelector(".profile__subtitle"),a=document.querySelector("#profile-button-edit"),l=document.querySelector("#profile-edit-modal"),d=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-subtitle-input"),u=l.querySelector("#modal-form-edit"),h=document.querySelector("#modal-form-avatar"),_=document.querySelector(".cards__list"),m=document.querySelector("#profile-button-add"),p=(document.querySelector("#profile-add-modal"),document.querySelector("#modal-form-add")),E=document.querySelector(".profile__image-edit"),v=document.querySelector(".profile__image"),g=(document.querySelector("#modal-delete"),{formSelector:"modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"}),b=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.json().then((t=>{if(e.ok)return console.log("Server response data:",t),t;throw console.error("Error data:",t),new Error(`Error: ${e.status}: ${t.message}`)}))}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}changeLikeStatus(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}updateUserInfo(e,t){return console.log(e,t),this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}setUserAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1ccf1ba4-0220-4b67-950b-c472a98644ae","Content-Type":"application/json"}}),S=new t(g,p),L=new t(g,u),f=new t(g,h);L.enableValidation(),S.enableValidation(),f.enableValidation();const k=new n("#profile-edit-modal",(function(e){let{name:t,description:s}=e;k.setLoading(!0),b.updateUserInfo(t,s).then((()=>{x.setUserInfo(t,s),k.close()})).catch(console.error).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const C=new n("#avatar-edit-modal",(function(e){let{url:t}=e;C.setLoading(!0),console.log(t),b.setUserAvatar(t).then((e=>{x.setUserAvatar(e.avatar),C.close()})).catch(console.error).finally((()=>{C.setLoading(!1)}))}));C.setEventListeners();const y=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setSubmitAction(e){this._handleFormSubmit=e}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Removing...";this._submitButton.textContent=e?t:this._submitButtonText}close(){super.close(),this._popupForm.removeEventListener("submit",this._handleFormSubmit)}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleFormSubmit),this._popupForm.addEventListener("submit",(e=>{e.preventDefault()}))}}("#modal-delete");function I(e){let{name:t,link:s}=e;U.open({name:t,link:s})}function q(t){const s=new e(t,"#card-template",I,(function(){b.changeLikeStatus(t._id,s.isLiked).then((e=>{console.log(e),s.updateLikes(e.isLiked)})).catch(console.error)}),(function(e){console.log(e),y.setSubmitAction((()=>{y.setLoading(!0),b.removeCard(e).then((e=>{s.removeCardElement(e._id),y.close()})).catch(console.error).finally((()=>{y.setLoading(!1)}))})),y.open()}));return s.getView()}let B,w;y.setEventListeners(),Promise.all([b.getInitialCards(),b.getUserInfo()]).then((e=>{let[t,r]=e;x.setUserInfo(r.name,r.about),x.setUserAvatar(r.avatar),w=r._id,B=new s({items:t,renderer:e=>{const t=q(e);B.addItem(t)}},_),B.renderItems()})).catch(console.error);const U=new class extends r{constructor(e){super({popupSelector:e})}open(e){this._previewImageElement=this._popupElement.querySelector(".modal__image"),this._previewImageCaption=this._popupElement.querySelector(".modal__image-caption"),this._previewImageElement.alt=e.name,this._previewImageCaption.textContent=e.name,this._previewImageElement.src=e.link,super.open()}}("#image-modal");U.setEventListeners();const x=new class{constructor(e,t,s){this._nameElement=e,this._jobElement=t,this._avatarElement=s}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._jobElement.textContent,console.log(e),e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setUserAvatar(e){this._avatarElement.src=e,this._avatarElement.alt=this._nameElement.textcontent}}(i,o,v),F=new n("#profile-add-modal",(function(e){let{name:t,link:s}=e;F.setLoading(!0),b.addCard({name:t,link:s}).then((e=>{const t=q(e);B.addItem(t),F.close()})).catch(console.error).finally((()=>{F.setLoading(!1)}))}));F.setEventListeners(),a.addEventListener("click",(()=>{const{name:e,description:t}=x.getUserInfo();d.value=e,c.value=t,k.open(),L.toggleButtonState()})),m.addEventListener("click",(()=>{F.open(),S.toggleButtonState()})),E.addEventListener("click",(()=>{C.open(),f.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUIxRyxtQkFBbUIsSUFHdENtRSxFQUFpQjdHLGlCQUFpQixTQUFTLEtBQ3pDOEosRUFBZ0J0RixPQUNoQitFLEVBQW9CN0csbUJBQW1CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuaXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b25cclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VzKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuICByZW1vdmVDYXJkRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuc29tZSgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlckl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuX3JlbmRlckl0ZW1zOicsIHRoaXMuX3JlbmRlckl0ZW1zKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9jbG9zZU1vZGFsQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikgfHxcclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlTW9kYWxDbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIik7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKGlucHV0LnZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWJ1dHRvbi1lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1zdWJ0aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybS1hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYnV0dG9uLWFkZFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybS1hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZGVsZXRlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCJtb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgfTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuaW1wb3J0IHtcclxuICBwcm9maWxlVGl0bGUsXHJcbiAgcHJvZmlsZVN1YnRpdGxlLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVTdWJ0aXRsZUlucHV0LFxyXG4gIHByb2ZpbGVFZGl0Rm9ybSxcclxuICBjYXJkTGlzdEVsLFxyXG4gIHByb2ZpbGVBZGRCdXR0b24sXHJcbiAgY2FyZEFkZEZvcm0sXHJcbiAgY29uZmlnLFxyXG4gIGF2YXRhckVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBhdmF0YXJFZGl0Rm9ybSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIxY2NmMWJhNC0wMjIwLTRiNjctOTUwYi1jNDcyYTk4NjQ0YWVcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgY2FyZEFkZEZvcm0pO1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgZWRpdEF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYXZhdGFyRWRpdEZvcm0pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL2VkaXQgcG9wdXBcclxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXRcclxuKTtcclxuXHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9hdmF0YXIgZWRpdCBwb3B1cFxyXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNhdmF0YXItZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZUF2YXRhckZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9kZWxldGUgcG9wdXBcclxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNtb2RhbC1kZWxldGVcIik7XHJcblxyXG5kZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9Qb3B1cCB3aXRoIGltYWdlXHJcbmZ1bmN0aW9uIGhhbmRsZVByZXZpZXdJbWFnZSh7IG5hbWUsIGxpbmsgfSkge1xyXG4gIHBvcHVwSW1hZ2Uub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbi8vcmVuZGVyIGNhcmQgZnVuY3Rpb25cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZVByZXZpZXdJbWFnZSxcclxuICAgIGZ1bmN0aW9uIGhhbmRsZUxpa2UoKSB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5jaGFuZ2VMaWtlU3RhdHVzKGNhcmREYXRhLl9pZCwgY2FyZEVsZW1lbnQuaXNMaWtlZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgY2FyZEVsZW1lbnQudXBkYXRlTGlrZXMocmVzLmlzTGlrZWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfSxcclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVEZWxldGUoY2FyZElkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhcmRJZCk7XHJcbiAgICAgIGRlbGV0ZVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5yZW1vdmVDYXJkKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlQ2FyZEVsZW1lbnQocmVzLl9pZCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZVBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkZWxldGVQb3B1cC5vcGVuKCk7XHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcbmxldCB1c2VySWQ7XHJcbnVzZXJJZDtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuICAudGhlbigoW2luaXRpYWxDYXJkcywgdXNlckRhdGFdKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgY2FyZExpc3RFbFxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL3VzZXIgaW5mb1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVTdWJ0aXRsZSwgcHJvZmlsZUF2YXRhcik7XHJcblxyXG4vL2hhbmRsZXJzXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gIGVkaXRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbik7XHJcbiAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0UG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9uZXcgQ2FyZCBQb3B1cFxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XHJcbik7XHJcblxyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KHsgbmFtZSwgbGluayB9KSB7XHJcbiAgbmV3Q2FyZFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSlcclxuICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KHsgdXJsIH0pIHtcclxuICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBjb25zb2xlLmxvZyh1cmwpO1xyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJBdmF0YXIodXJsKVxyXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL0V2ZW50IGhhbmRsZXJzXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBuYW1lO1xyXG4gIHByb2ZpbGVTdWJ0aXRsZUlucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XHJcblxyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdEF2YXRhclZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIHJlc3BvbnNlIGRhdGE6XCIsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRhdGE6XCIsIGRhdGEpO1xyXG4gICAgICAgIC8vIFRocm93IGFuIGVycm9yIHdpdGggYm90aCB0aGUgc3RhdHVzIGFuZCB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3I6ICR7cmVzLnN0YXR1c306ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VMaWtlU3RhdHVzKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIGNvbnNvbGUubG9nKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih1cmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJSZW1vdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudCA9IFxyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VDYXB0aW9uID0gXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuXHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lRWxlbWVudCwgdXNlckpvYkVsZW1lbnQsIGF2YXRhckVsZW1lbnQpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gIHVzZXJOYW1lRWxlbWVudDtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSB1c2VySm9iRWxlbWVudDtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBhdmF0YXJFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBwcm9maWxlT2JqZWN0ID0ge307XHJcbiAgICBwcm9maWxlT2JqZWN0W1wibmFtZVwiXSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgcHJvZmlsZU9iamVjdFtcImRlc2NyaXB0aW9uXCJdID0gdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudDtcclxuICAgIGNvbnNvbGUubG9nKHByb2ZpbGVPYmplY3QpO1xyXG4gICAgcmV0dXJuIHByb2ZpbGVPYmplY3Q7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXJFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhckVsZW1lbnQ7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LmFsdCA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRjb250ZW50XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJpc0xpa2VkIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJ1cGRhdGVMaWtlcyIsIl90b2dnbGVMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInJlbW92ZUNhcmRFbGVtZW50IiwiZ2V0VmlldyIsIl9jYXJkVGl0bGUiLCJzcmMiLCJ0ZXh0Q29udGVudCIsImFsdCIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxzIiwic29tZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImNvbnNvbGUiLCJsb2ciLCJpdGVtIiwiYWRkSXRlbSIsImNhcmRFbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlTW9kYWxDbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJzZXRMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlU3VidGl0bGUiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVTdWJ0aXRsZUlucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiYXZhdGFyRWRpdEZvcm0iLCJjYXJkTGlzdEVsIiwicHJvZmlsZUFkZEJ1dHRvbiIsImNhcmRBZGRGb3JtIiwiYXZhdGFyRWRpdEJ1dHRvbiIsInByb2ZpbGVBdmF0YXIiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfaGFuZGxlU2VydmVyUmVzcG9uc2UiLCJyZXMiLCJqc29uIiwidGhlbiIsImRhdGEiLCJvayIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXMiLCJtZXNzYWdlIiwiX3JlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImFkZENhcmQiLCJfcmVmMiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlQ2FyZCIsImNhcmRJZCIsImNoYW5nZUxpa2VTdGF0dXMiLCJ1cGRhdGVVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwiYWJvdXQiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImFkZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJlZGl0QXZhdGFyVmFsaWRhdG9yIiwiZWRpdFBvcHVwIiwiX3JlZjMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJmaW5hbGx5IiwiYXZhdGFyRWRpdFBvcHVwIiwiX3JlZjUiLCJ1c2VyRGF0YSIsImRlbGV0ZVBvcHVwIiwic2V0U3VibWl0QWN0aW9uIiwiYWN0aW9uIiwiaGFuZGxlUHJldmlld0ltYWdlIiwicG9wdXBJbWFnZSIsInJlbmRlckNhcmQiLCJjYXJkU2VjdGlvbiIsInVzZXJJZCIsIlByb21pc2UiLCJhbGwiLCJpbml0aWFsQ2FyZHMiLCJfcHJldmlld0ltYWdlRWxlbWVudCIsIl9wcmV2aWV3SW1hZ2VDYXB0aW9uIiwidXNlck5hbWVFbGVtZW50IiwidXNlckpvYkVsZW1lbnQiLCJhdmF0YXJFbGVtZW50IiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsInByb2ZpbGVPYmplY3QiLCJ0ZXh0Y29udGVudCIsIm5ld0NhcmRQb3B1cCIsIl9yZWY0Il0sInNvdXJjZVJvb3QiOiIifQ==