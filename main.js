!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s,this.isLiked=e.isLiked,this._ownerId=e.owner._id,this._cardId=e._id,this._handleLikeClick=r,this._handleDeleteClick=n}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLikeClick()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDeleteClick(this._cardId)})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}updateLikes(e){this.isLiked=e,this._toggleLikeButton()}_toggleLikeButton(){this.isLiked?this._likeButton.classList.add("card__button-like_active"):this._likeButton.classList.remove("card__button-like_active")}_handleDelete(){this._cardElement.remove()}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}removeCardElement(){this._cardElement.remove()}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__button-like"),this._deleteButton=this._cardElement.querySelector(".card__button-delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._toggleLikeButton(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e,t){let{items:s,renderer:r}=e;this._renderItems=s,this._renderer=r,this._container=t}renderItems(){console.log("this._renderItems:",this._renderItems),this._renderItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_closeModalClick=e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal"))&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",this._closeModalClick)}}class n extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=document.querySelector(`${e} .modal__form`),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__form-input").forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._popupForm.reset(),super.close()}}const i=document.querySelector(".profile__title"),o=document.querySelector(".profile__subtitle"),a=document.querySelector("#profile-button-edit"),l=document.querySelector("#profile-edit-modal"),d=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-subtitle-input"),u=l.querySelector("#modal-form-edit"),_=document.querySelector("#modal-form-avatar"),h=document.querySelector(".cards__list"),m=document.querySelector("#profile-button-add"),p=(document.querySelector("#profile-add-modal"),document.querySelector("#modal-form-add")),E=document.querySelector(".profile__image-edit"),v=document.querySelector(".profile__image"),b=(document.querySelector("#modal-delete"),{formSelector:"modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"}),S=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.json().then((t=>{if(e.ok)return console.log("Server response data:",t),t;throw console.error("Error data:",t),new Error(`Error: ${e.status}: ${t.message}`)}))}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}changeLikeStatus(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}updateUserInfo(e,t){return console.log(e,t),this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}setUserAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1ccf1ba4-0220-4b67-950b-c472a98644ae","Content-Type":"application/json"}}),g=new t(b,p),L=new t(b,u),f=new t(b,_);L.enableValidation(),g.enableValidation(),f.enableValidation();const k=new n("#profile-edit-modal",(function(e){let{name:t,description:s}=e;k.setLoading(!0),S.updateUserInfo(t,s).then((()=>{x.setUserInfo(t,s),k.close()})).catch(console.error).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const y=new n("#avatar-edit-modal",(function(e){let{url:t}=e;y.setLoading(!0),console.log(t),S.setUserAvatar(t).then((e=>{x.setUserAvatar(e.avatar),y.close()})).catch(console.error).finally((()=>{y.setLoading(!1)}))}));y.setEventListeners();const C=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._form=this._popupElement.querySelector("form"),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setSubmitAction(e){this._handleFormSubmit=e}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Removing...";this._submitButton.textContent=e?t:this._submitButtonText}close(){super.close(),this._popupForm.removeEventListener("submit",this._handleFormSubmit)}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleFormSubmit)}}("#modal-delete");function q(e){let{name:t,link:s}=e;U.open({name:t,link:s})}function I(t){const s=new e(t,"#card-template",q,(function(){S.changeLikeStatus(t._id,s.isLiked).then((e=>{console.log(e),s.updateLikes(e.isLiked)})).catch(console.error)}),(function(e){console.log(e),C.setSubmitAction((()=>{C.setLoading(!0),S.removeCard(e).then((e=>{s.removeCardElement(e._id),C.close()})).catch(console.error).finally((()=>{C.setLoading(!1)}))})),C.open()}));return s.getView()}let B,w;C.setEventListeners(),Promise.all([S.getInitialCards(),S.getUserInfo()]).then((e=>{let[t,r]=e;x.setUserInfo(r.name,r.about),x.setUserAvatar(r.avatar),w=r._id,B=new s({items:t,renderer:e=>{const t=I(e);B.addItem(t)}},h),B.renderItems()})).catch(console.error);const U=new class extends r{constructor(e){super({popupSelector:e})}open(e){this._previewImageElement=this._popupElement.querySelector(".modal__image"),this._previewImageCaption=this._popupElement.querySelector(".modal__image-caption"),this._previewImageElement.alt=e.name,this._previewImageCaption.textContent=e.name,this._previewImageElement.src=e.link,super.open()}}("#image-modal");U.setEventListeners();const x=new class{constructor(e,t,s){this._nameElement=e,this._jobElement=t,this._avatarElement=s}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._jobElement.textContent,console.log(e),e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setUserAvatar(e){this._avatarElement.src=e,this._avatarElement.alt=this._nameElement.textcontent}}(i,o,v),F=new n("#profile-add-modal",(function(e){let{name:t,link:s}=e;F.setLoading(!0),S.addCard({name:t,link:s}).then((e=>{const t=I(e);B.addItem(t),F.close()})).catch(console.error).finally((()=>{F.setLoading(!1)}))}));F.setEventListeners(),a.addEventListener("click",(()=>{const{name:e,description:t}=x.getUserInfo();d.value=e,c.value=t,k.open(),L.toggleButtonState()})),m.addEventListener("click",(()=>{F.open(),g.toggleButtonState()})),E.addEventListener("click",(()=>{y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0JTLEVBQVVoRixPQUNWOEUsRUFBa0I1RyxtQkFBbUIsSUFHdkNpRSxFQUFpQjNHLGlCQUFpQixTQUFTLEtBQ3pDdUwsRUFBYS9HLE9BQ2I0RSxFQUFpQjFHLG1CQUFtQixJQUd0Q21FLEVBQWlCN0csaUJBQWlCLFNBQVMsS0FDekM4SixFQUFnQnRGLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBjYXJkRGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYC5jYXJkX19idXR0b24tbGlrZWApXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljaygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2NhcmRJZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcyhpc0xpa2VkKSB7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fdG9nZ2xlTGlrZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2VCdXR0b24oKSB7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbiAgcmVtb3ZlQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICAvLyBBc3N1bWluZyB0aGlzLl9jYXJkRWxlbWVudCBpcyB0aGUgY2FyZCBET00gZWxlbWVudFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1saWtlXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3RvZ2dsZUxpa2VCdXR0b24oKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG5cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVySXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcygpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndGhpcy5fcmVuZGVySXRlbXM6JywgdGhpcy5fcmVuZGVySXRlbXMpO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlckl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2Nsb3NlTW9kYWxDbGljayA9IChlKSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSB8fFxyXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xvc2VNb2RhbENsaWNrKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7cG9wdXBTZWxlY3Rvcn0gLm1vZGFsX19mb3JtYCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlmIChpbnB1dC52YWx1ZSAhPT0gXCJcIikge1xyXG4gICAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1idXR0b24tZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtc3VidGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybS1lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWZvcm0tYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWJ1dHRvbi1hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWZvcm0tYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlbGV0ZVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwibW9kYWxfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG4gIH07IiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZVRpdGxlLFxyXG4gIHByb2ZpbGVTdWJ0aXRsZSxcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlVGl0bGVJbnB1dCxcclxuICBwcm9maWxlU3VidGl0bGVJbnB1dCxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgY2FyZExpc3RFbCxcclxuICBwcm9maWxlQWRkQnV0dG9uLFxyXG4gIGNhcmRBZGRGb3JtLFxyXG4gIGNvbmZpZyxcclxuICBhdmF0YXJFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgYXZhdGFyRWRpdEZvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMWNjZjFiYTQtMDIyMC00YjY3LTk1MGItYzQ3MmE5ODY0NGFlXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRBZGRGb3JtKTtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGF2YXRhckVkaXRGb3JtKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy9lZGl0IHBvcHVwXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0XHJcbik7XHJcblxyXG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vYXZhdGFyIGVkaXQgcG9wdXBcclxuY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYXZhdGFyLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XHJcbik7XHJcblxyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vZGVsZXRlIHBvcHVwXHJcbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXCIjbW9kYWwtZGVsZXRlXCIpO1xyXG5cclxuZGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vUG9wdXAgd2l0aCBpbWFnZVxyXG5mdW5jdGlvbiBoYW5kbGVQcmV2aWV3SW1hZ2UoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBwb3B1cEltYWdlLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG59XHJcblxyXG4vL3JlbmRlciBjYXJkIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAgY2FyZERhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVQcmV2aWV3SW1hZ2UsXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVMaWtlKCkge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuY2hhbmdlTGlrZVN0YXR1cyhjYXJkRGF0YS5faWQsIGNhcmRFbGVtZW50LmlzTGlrZWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKHJlcy5pc0xpa2VkKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgIH0sXHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlRGVsZXRlKGNhcmRJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhjYXJkSWQpO1xyXG4gICAgICBkZWxldGVQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAucmVtb3ZlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZUNhcmRFbGVtZW50KHJlcy5faWQpO1xyXG4gICAgICAgICAgICBkZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgZGVsZXRlUG9wdXAub3BlbigpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcclxufVxyXG5cclxubGV0IGNhcmRTZWN0aW9uO1xyXG5sZXQgdXNlcklkO1xyXG51c2VySWQ7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldEluaXRpYWxDYXJkcygpLCBhcGkuZ2V0VXNlckluZm8oKV0pXHJcbiAgLnRoZW4oKFtpbml0aWFsQ2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNhcmRMaXN0RWxcclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcclxucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy91c2VyIGluZm9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlU3VidGl0bGUsIHByb2ZpbGVBdmF0YXIpO1xyXG5cclxuLy9oYW5kbGVyc1xyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICBlZGl0UG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbilcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pO1xyXG4gICAgICBlZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vbmV3IENhcmQgUG9wdXBcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gIG5ld0NhcmRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoeyBuYW1lLCBsaW5rIH0pXHJcbiAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBuZXdDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCh7IHVybCB9KSB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgY29uc29sZS5sb2codXJsKTtcclxuICBhcGlcclxuICAgIC5zZXRVc2VyQXZhdGFyKHVybClcclxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICAgIGF2YXRhckVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy9FdmVudCBoYW5kbGVyc1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlU3VidGl0bGVJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xyXG5cclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuXHJcbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIHJlc3BvbnNlIGRhdGE6XCIsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRhdGE6XCIsIGRhdGEpO1xyXG4gICAgICAgIC8vIFRocm93IGFuIGVycm9yIHdpdGggYm90aCB0aGUgc3RhdHVzIGFuZCB0aGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3I6ICR7cmVzLnN0YXR1c306ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VMaWtlU3RhdHVzKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIGNvbnNvbGUubG9nKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih1cmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJSZW1vdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQgPSBcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlQ2FwdGlvbiA9IFxyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcblxyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZUVsZW1lbnQsIHVzZXJKb2JFbGVtZW50LCBhdmF0YXJFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9ICB1c2VyTmFtZUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gdXNlckpvYkVsZW1lbnQ7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gYXZhdGFyRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcHJvZmlsZU9iamVjdCA9IHt9O1xyXG4gICAgcHJvZmlsZU9iamVjdFtcIm5hbWVcIl0gPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudDtcclxuICAgIHByb2ZpbGVPYmplY3RbXCJkZXNjcmlwdGlvblwiXSA9IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICBjb25zb2xlLmxvZyhwcm9maWxlT2JqZWN0KTtcclxuICAgIHJldHVybiBwcm9maWxlT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyRWxlbWVudCkge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXJFbGVtZW50O1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Y29udGVudFxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiaXNMaWtlZCIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZElkIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRJbWFnZSIsInVwZGF0ZUxpa2VzIiwiX3RvZ2dsZUxpa2VCdXR0b24iLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIl9oYW5kbGVEZWxldGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW1vdmVDYXJkRWxlbWVudCIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwiX2RlbGV0ZUJ1dHRvbiIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5wdXRFbHMiLCJzb21lIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiY29uc29sZSIsImxvZyIsIml0ZW0iLCJhZGRJdGVtIiwiY2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VNb2RhbENsaWNrIiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uVGV4dCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZVN1YnRpdGxlSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhdmF0YXJFZGl0Rm9ybSIsImNhcmRMaXN0RWwiLCJwcm9maWxlQWRkQnV0dG9uIiwiY2FyZEFkZEZvcm0iLCJhdmF0YXJFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1TZWxlY3RvciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsImpzb24iLCJ0aGVuIiwiZGF0YSIsIm9rIiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiYWRkQ2FyZCIsIl9yZWYyIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmVDYXJkIiwiY2FyZElkIiwiY2hhbmdlTGlrZVN0YXR1cyIsInVwZGF0ZVVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJhYm91dCIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiYWRkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJlZGl0UG9wdXAiLCJfcmVmMyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImZpbmFsbHkiLCJhdmF0YXJFZGl0UG9wdXAiLCJfcmVmNSIsInVzZXJEYXRhIiwiZGVsZXRlUG9wdXAiLCJfZm9ybSIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImhhbmRsZVByZXZpZXdJbWFnZSIsInBvcHVwSW1hZ2UiLCJyZW5kZXJDYXJkIiwiY2FyZFNlY3Rpb24iLCJ1c2VySWQiLCJQcm9taXNlIiwiYWxsIiwiaW5pdGlhbENhcmRzIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfcHJldmlld0ltYWdlQ2FwdGlvbiIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJKb2JFbGVtZW50IiwiYXZhdGFyRWxlbWVudCIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJwcm9maWxlT2JqZWN0IiwidGV4dGNvbnRlbnQiLCJuZXdDYXJkUG9wdXAiLCJfcmVmNCJdLCJzb3VyY2VSb290IjoiIn0=