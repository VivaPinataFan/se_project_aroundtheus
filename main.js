!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=s,this.isLiked=e.isLiked,this._ownerId=e.owner._id,this._cardId=e._id,this._handleLikeClick=r,this._handleDeleteClick=n}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick()})),this._cardElement.querySelector(".card__button-delete").addEventListener("click",(()=>{this._handleDeleteClick(this._cardId)})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}updateLikes(e){this.isLiked=e,this._toggleLikeButton()}_toggleLikeButton(){this.isLiked?this._likeButton.classList.add("card__button-like_active"):this._likeButton.classList.remove("card__button-like_active")}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}removeCardElement(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__button-like"),this._deleteButton=this._cardElement.querySelector(".card__button-delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._toggleLikeButton(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e,t){let{items:s,renderer:r}=e;this._renderItems=s,this._renderer=r,this._container=t}renderItems(){console.log("this._renderItems:",this._renderItems),this._renderItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_closeModalClick=e=>{(e.target.classList.contains("modal__close")||e.target.classList.contains("modal"))&&this.close()};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",this._closeModalClick)}}class n extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=document.querySelector(`${e} .modal__form`),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__form-input").forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._popupForm.reset(),super.close()}}const i=document.querySelector(".profile__title"),o=document.querySelector(".profile__subtitle"),a=document.querySelector("#profile-button-edit"),l=document.querySelector("#profile-edit-modal"),d=document.querySelector("#profile-title-input"),c=document.querySelector("#profile-subtitle-input"),u=l.querySelector("#modal-form-edit"),h=document.querySelector("#modal-form-avatar"),_=document.querySelector(".cards__list"),m=document.querySelector("#profile-button-add"),p=(document.querySelector("#profile-add-modal"),document.querySelector("#modal-form-add")),E=document.querySelector(".profile__image-edit"),v=document.querySelector(".profile__image"),g=(document.querySelector("#modal-delete"),{formSelector:"modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"}),b=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.json().then((t=>{if(e.ok)return console.log("Server response data:",t),t;throw console.error("Error data:",t),new Error(`Error: ${e.status}: ${t.message}`)}))}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}changeLikeStatus(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}updateUserInfo(e,t){return console.log(e,t),this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}setUserAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1ccf1ba4-0220-4b67-950b-c472a98644ae","Content-Type":"application/json"}}),S=new t(g,p),L=new t(g,u),f=new t(g,h);L.enableValidation(),S.enableValidation(),f.enableValidation();const k=new n("#profile-edit-modal",(function(e){let{name:t,description:s}=e;k.setLoading(!0),b.updateUserInfo(t,s).then((()=>{x.setUserInfo(t,s),k.close()})).catch(console.error).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const y=new n("#avatar-edit-modal",(function(e){let{url:t}=e;y.setLoading(!0),console.log(t),b.setUserAvatar(t).then((e=>{x.setUserAvatar(e.avatar),y.close()})).catch(console.error).finally((()=>{y.setLoading(!1)}))}));y.setEventListeners();const C=new class extends r{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent,this._form=this._popupElement.querySelector("form")}setSubmitAction(e){this._handleFormSubmit=e}setLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Removing...";this._submitButton.textContent=e?t:this._submitButtonText}close(){super.close(),this._popupForm.removeEventListener("submit",this._handleFormSubmit)}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._handleFormSubmit),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#modal-delete");function I(e){let{name:t,link:s}=e;U.open({name:t,link:s})}function q(t){const s=new e(t,"#card-template",I,(function(){b.changeLikeStatus(t._id,s.isLiked).then((e=>{console.log(e),s.updateLikes(e.isLiked)})).catch(console.error)}),(function(e){console.log(e),C.setSubmitAction((()=>{C.setLoading(!0),b.removeCard(e).then((e=>{s.removeCardElement(e._id),C.close()})).catch(console.error).finally((()=>{C.setLoading(!1)}))})),C.open()}));return s.getView()}let B,w;C.setEventListeners(),Promise.all([b.getInitialCards(),b.getUserInfo()]).then((e=>{let[t,r]=e;x.setUserInfo(r.name,r.about),x.setUserAvatar(r.avatar),w=r._id,B=new s({items:t,renderer:e=>{const t=q(e);B.addItem(t)}},_),B.renderItems()})).catch(console.error);const U=new class extends r{constructor(e){super({popupSelector:e})}open(e){this._previewImageElement=this._popupElement.querySelector(".modal__image"),this._previewImageCaption=this._popupElement.querySelector(".modal__image-caption"),this._previewImageElement.alt=e.name,this._previewImageCaption.textContent=e.name,this._previewImageElement.src=e.link,super.open()}}("#image-modal");U.setEventListeners();const x=new class{constructor(e,t,s){this._nameElement=e,this._jobElement=t,this._avatarElement=s}getUserInfo(){const e={};return e.name=this._nameElement.textContent,e.description=this._jobElement.textContent,console.log(e),e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}setUserAvatar(e){this._avatarElement.src=e,this._avatarElement.alt=this._nameElement.textcontent}}(i,o,v),F=new n("#profile-add-modal",(function(e){let{name:t,link:s}=e;F.setLoading(!0),b.addCard({name:t,link:s}).then((e=>{const t=q(e);B.addItem(t),F.close()})).catch(console.error).finally((()=>{F.setLoading(!1)}))}));F.setEventListeners(),a.addEventListener("click",(()=>{const{name:e,description:t}=x.getUserInfo();d.value=e,c.value=t,k.open(),L.toggleButtonState()})),m.addEventListener("click",(()=>{F.open(),S.toggleButtonState()})),E.addEventListener("click",(()=>{y.open(),f.toggleButtonState()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBa0I1RyxtQkFBbUIsSUFHdkNpRSxFQUFpQjNHLGlCQUFpQixTQUFTLEtBQ3pDdUwsRUFBYS9HLE9BQ2I0RSxFQUFpQjFHLG1CQUFtQixJQUd0Q21FLEVBQWlCN0csaUJBQWlCLFNBQVMsS0FDekM4SixFQUFnQnRGLE9BQ2hCK0UsRUFBb0I3RyxtQkFBbUIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBjYXJkRGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VzKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuICByZW1vdmVDYXJkRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuc29tZSgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlckl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuX3JlbmRlckl0ZW1zOicsIHRoaXMuX3JlbmRlckl0ZW1zKTtcclxuICAgICAgICB0aGlzLl9yZW5kZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oY2FyZEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9jbG9zZU1vZGFsQ2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikgfHxcclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIilcclxuICAgICkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlTW9kYWxDbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3BvcHVwU2VsZWN0b3J9IC5tb2RhbF9fZm9ybWApO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgdmFsdWVzID0ge307XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpZiAoaW5wdXQudmFsdWUgIT09IFwiXCIpIHtcclxuICAgICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYnV0dG9uLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXN1YnRpdGxlLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWZvcm0tZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLWF2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1idXR0b24tYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLWFkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZWxldGVcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuICB9OyIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlU3VidGl0bGUsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZVN1YnRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIGNhcmRMaXN0RWwsXHJcbiAgcHJvZmlsZUFkZEJ1dHRvbixcclxuICBjYXJkQWRkRm9ybSxcclxuICBjb25maWcsXHJcbiAgYXZhdGFyRWRpdEJ1dHRvbixcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIGF2YXRhckVkaXRGb3JtLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjFjY2YxYmE0LTAyMjAtNGI2Ny05NTBiLWM0NzJhOTg2NDRhZVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkQWRkRm9ybSk7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5jb25zdCBlZGl0QXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhdmF0YXJFZGl0Rm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vZWRpdCBwb3B1cFxyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL2F2YXRhciBlZGl0IHBvcHVwXHJcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuYXZhdGFyRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL2RlbGV0ZSBwb3B1cFxyXG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFwiI21vZGFsLWRlbGV0ZVwiKTtcclxuXHJcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1BvcHVwIHdpdGggaW1hZ2VcclxuZnVuY3Rpb24gaGFuZGxlUHJldmlld0ltYWdlKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgcG9wdXBJbWFnZS5vcGVuKHsgbmFtZSwgbGluayB9KTtcclxufVxyXG5cclxuLy9yZW5kZXIgY2FyZCBmdW5jdGlvblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlUHJldmlld0ltYWdlLFxyXG4gICAgZnVuY3Rpb24gaGFuZGxlTGlrZSgpIHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmNoYW5nZUxpa2VTdGF0dXMoY2FyZERhdGEuX2lkLCBjYXJkRWxlbWVudC5pc0xpa2VkKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVMaWtlcyhyZXMuaXNMaWtlZCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9LFxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShjYXJkSWQpIHtcclxuICAgICAgY29uc29sZS5sb2coY2FyZElkKTtcclxuICAgICAgZGVsZXRlUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBkZWxldGVQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnJlbW92ZUNhcmQoY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmVDYXJkRWxlbWVudChyZXMuX2lkKTtcclxuICAgICAgICAgICAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxubGV0IHVzZXJJZDtcclxudXNlcklkO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG4gIC50aGVuKChbaW5pdGlhbENhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjYXJkTGlzdEVsXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vdXNlciBpbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVUaXRsZSwgcHJvZmlsZVN1YnRpdGxlLCBwcm9maWxlQXZhdGFyKTtcclxuXHJcbi8vaGFuZGxlcnNcclxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgZWRpdFBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL25ldyBDYXJkIFBvcHVwXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxuXHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICBuZXdDYXJkUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKHsgbmFtZSwgbGluayB9KVxyXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgbmV3Q2FyZFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoeyB1cmwgfSkge1xyXG4gIGF2YXRhckVkaXRQb3B1cC5zZXRMb2FkaW5nKHRydWUpO1xyXG4gIGNvbnNvbGUubG9nKHVybCk7XHJcbiAgYXBpXHJcbiAgICAuc2V0VXNlckF2YXRhcih1cmwpXHJcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLnNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vRXZlbnQgaGFuZGxlcnNcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZVN1YnRpdGxlSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuXHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxuICBlZGl0QXZhdGFyVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgcmVzcG9uc2UgZGF0YTpcIiwgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvciByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGF0YTpcIiwgZGF0YSk7XHJcbiAgICAgICAgLy8gVGhyb3cgYW4gZXJyb3Igd2l0aCBib3RoIHRoZSBzdGF0dXMgYW5kIHRoZSBlcnJvciBtZXNzYWdlXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvcjogJHtyZXMuc3RhdHVzfTogJHtkYXRhLm1lc3NhZ2V9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2hhbmRsZVNlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUxpa2VTdGF0dXMoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgY29uc29sZS5sb2cobmFtZSwgZGVzY3JpcHRpb24pO1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogdXJsLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlJlbW92aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24gPSBcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xyXG5cclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVFbGVtZW50LCB1c2VySm9iRWxlbWVudCwgYXZhdGFyRWxlbWVudCkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSAgdXNlck5hbWVFbGVtZW50O1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IHVzZXJKb2JFbGVtZW50O1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGF2YXRhckVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHByb2ZpbGVPYmplY3QgPSB7fTtcclxuICAgIHByb2ZpbGVPYmplY3RbXCJuYW1lXCJdID0gdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICBwcm9maWxlT2JqZWN0W1wiZGVzY3JpcHRpb25cIl0gPSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgY29uc29sZS5sb2cocHJvZmlsZU9iamVjdCk7XHJcbiAgICByZXR1cm4gcHJvZmlsZU9iamVjdDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhckVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyRWxlbWVudDtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZUVsZW1lbnQudGV4dGNvbnRlbnRcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImlzTGlrZWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX2NhcmRJZCIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2NhcmRJbWFnZSIsInVwZGF0ZUxpa2VzIiwiX3RvZ2dsZUxpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZW1vdmVDYXJkRWxlbWVudCIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwiX2RlbGV0ZUJ1dHRvbiIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5wdXRFbHMiLCJzb21lIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiY29uc29sZSIsImxvZyIsIml0ZW0iLCJhZGRJdGVtIiwiY2FyZEVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VNb2RhbENsaWNrIiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uVGV4dCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVTdWJ0aXRsZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZVN1YnRpdGxlSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhdmF0YXJFZGl0Rm9ybSIsImNhcmRMaXN0RWwiLCJwcm9maWxlQWRkQnV0dG9uIiwiY2FyZEFkZEZvcm0iLCJhdmF0YXJFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1TZWxlY3RvciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsImpzb24iLCJ0aGVuIiwiZGF0YSIsIm9rIiwiZXJyb3IiLCJFcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiYWRkQ2FyZCIsIl9yZWYyIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW1vdmVDYXJkIiwiY2FyZElkIiwiY2hhbmdlTGlrZVN0YXR1cyIsInVwZGF0ZVVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJhYm91dCIsInNldFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiYWRkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJlZGl0UG9wdXAiLCJfcmVmMyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImZpbmFsbHkiLCJhdmF0YXJFZGl0UG9wdXAiLCJfcmVmNSIsInVzZXJEYXRhIiwiZGVsZXRlUG9wdXAiLCJfZm9ybSIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsImhhbmRsZVByZXZpZXdJbWFnZSIsInBvcHVwSW1hZ2UiLCJyZW5kZXJDYXJkIiwiY2FyZFNlY3Rpb24iLCJ1c2VySWQiLCJQcm9taXNlIiwiYWxsIiwiaW5pdGlhbENhcmRzIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfcHJldmlld0ltYWdlQ2FwdGlvbiIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJKb2JFbGVtZW50IiwiYXZhdGFyRWxlbWVudCIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJwcm9maWxlT2JqZWN0IiwidGV4dGNvbnRlbnQiLCJuZXdDYXJkUG9wdXAiLCJfcmVmNCJdLCJzb3VyY2VSb290IjoiIn0=